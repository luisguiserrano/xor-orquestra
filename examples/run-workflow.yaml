ZapOSApiVersion: v1alpha1

kind: Workflow

resources:
- name: z-quantum-core
  type: git
  parameters:
    url: "git@github.com:zapatacomputing/z-quantum-core.git"
    branch: "dev"
- name: xor-orquestra
  type: git
  parameters:
    url: "git@github.com:luisguiserrano/xor-orquestra.git"
    branch: "master"
    
metadata:
  generateName: xor-orq-

spec:

  entrypoint: xor-workflow

  arguments:
    parameters:
    - s3-bucket: quantum-engine
    - s3-key: qml/gans/

  templates:
  - name: xor-workflow
    steps:

    - - name: train-xor-model
        template: train-model
        # Can the above two be the same name?
        arguments:
          parameters:

          - hidden_layer: "8"
          - epochs: "5000"
          - lr: "0.01"

          - resources: [xor-orquestra, z-quantum-core]
          - docker-image: z-ml
          - docker-tag: latest
          # Why do I need the data coming in as an artifact, if I'm generating it inside?
          #artifacts:
          #- name: data
          #  from: '{{steps.generate-data.outputs.artifacts.data}}'
